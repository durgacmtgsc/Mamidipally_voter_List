<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BPY Team Mamidipally</title>

  <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/datatables.net@1.13.8/js/jquery.dataTables.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/datatables.net-dt@1.13.8/css/jquery.dataTables.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Pothana2000&display=swap" rel="stylesheet">

  <style>

    /* üî• Watermark */
    body::before {
        content: "BPY TEAM";
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 140px;
        color: rgba(255, 165, 0, 0.07);
        z-index: 0;
        pointer-events: none;
        font-weight: 800;
        letter-spacing: 12px;
        white-space: nowrap;
    }

    body { font-family: Arial, sans-serif; background: #f4f6f9; margin: 20px; }

    .container {
      width: 95%; max-width: 1600px; margin: auto; background: white;
      padding: 20px; border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      position: relative; z-index: 10;
    }

    .lang-btn { padding: 10px 25px; background: #3498db; color: white; border:none;
                border-radius:6px; cursor:pointer; }

    table.dataTable thead th { background:#d35400; color:white; }

    /* üîí PASSWORD SCREEN */
    #passwordScreen {
        position: fixed; top:0; left:0; width:100%; height:100%;
        background: rgba(0,0,0,0.85);
        display:flex; align-items:center; justify-content:center;
        z-index:99999;
    }

    #passwordBox {
        background:white; padding:35px; border-radius:12px;
        width:350px; text-align:center;
        box-shadow:0 3px 12px rgba(0,0,0,0.35);
    }

    #passwordInput {
        width:100%; padding:12px; font-size:18px;
        border:1px solid #ccc; border-radius:6px;
        margin-top:12px;
    }

    .telugu { font-family: 'Pothana2000', Arial; font-size:17px; }

  </style>
</head>

<body>

<!-- üîí PASSWORD GATE -->
<div id="passwordScreen">
    <div id="passwordBox">
        <h2 style="margin:0;color:#d35400;">BPY Team Mamidipally</h2>
        <p style="font-size:18px;margin-top:10px;">Enter Password</p>

        <input type="password" id="passwordInput" placeholder="Enter password">
        <button onclick="checkPassword()"
            style="margin-top:15px;padding:10px 30px;background:#d35400;color:white;border:none;border-radius:6px;font-size:16px;">
            Submit
        </button>
        <p id="errorMsg" style="color:red;margin-top:10px;font-weight:bold;"></p>
    </div>
</div>

<script>
function checkPassword() {
    const correct = "4111";
    const entered = document.getElementById("passwordInput").value;

    if (entered === correct) {
        document.getElementById("passwordScreen").style.display = "none";
    } else {
        document.getElementById("errorMsg").textContent = "Incorrect Password!";
    }
}
</script>


<div class="container">

    <!-- Logo -->
    <div style="text-align:center;margin-bottom:10px;">
        <img src="images/Logo.jpeg" style="height:90px;object-fit:contain;"><br>
        <h1 id="pageTitle">BPY Team Mamidipally - Voters List</h1>
        <button id="langBtn" class="lang-btn">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å ‡∞µ‡±Ü‡∞∞‡±ç‡∞∑‡∞®‡±ç</button>
    </div>

    <div class="stats" style="background:#fffacd;padding:12px;border-radius:8px;text-align:center;margin-bottom:15px;font-weight:bold;">
      Total: <span id="totalCount"></span> |
      Male: <span id="maleCount"></span> |
      Female: <span id="femaleCount"></span> |
      Showing: <span id="showingCount"></span>
    </div>

    <div style="overflow-x:auto;">
        <table id="votersTable" class="display" style="width:100%;display:none;">
            <thead>
                <tr>
                    <th>S.No</th>
                    <th>Ward</th>
                    <th>Name</th>
                    <th>Father/Husband</th>
                    <th>Age</th>
                    <th>Gender</th>
                    <th>EPIC</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

</div>


<script>
let table, allData = [];
let isTelugu = false;

const teluguHeaders = ["‡∞ï‡±ç‡∞∞.‡∞∏‡∞Ç","‡∞µ‡∞æ‡∞∞‡±ç‡∞°‡±Å","‡∞™‡±á‡∞∞‡±Å","‡∞§‡∞Ç‡∞°‡±ç‡∞∞‡∞ø/‡∞≠‡∞∞‡±ç‡∞§","‡∞µ‡∞Ø‡∞∏‡±Å","‡∞≤‡∞ø‡∞Ç‡∞ó‡∞Ç","‡∞ì‡∞ü‡∞∞‡±Å ‡∞ï‡∞æ‡∞∞‡±ç‡∞°‡±Å"];
const englishHeaders = ["S.No","Ward","Name","Father/Husband","Age","Gender","EPIC"];


/* üåê LANGUAGE TOGGLE */
function toggleLanguage() {
  isTelugu = !isTelugu;

  document.getElementById('pageTitle').textContent =
      isTelugu ? "BPY ‡∞ü‡±Ä‡∞Æ‡±ç ‡∞Æ‡∞æ‡∞Æ‡∞ø‡∞°‡∞ø‡∞™‡∞≤‡±ç‡∞≤‡∞ø - ‡∞ì‡∞ü‡∞∞‡±ç‡∞≤ ‡∞ú‡∞æ‡∞¨‡∞ø‡∞§‡∞æ"
               : "BPY Team Mamidipally - Voters List";

  document.getElementById('langBtn').textContent =
      isTelugu ? "English Version" : "‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å ‡∞µ‡±Ü‡∞∞‡±ç‡∞∑‡∞®‡±ç";

  const h = isTelugu ? teluguHeaders : englishHeaders;

  $('#votersTable thead th').each(function(i) {
      $(this).text(h[i]);
  });

  if(table){
    table.rows().invalidate().draw();
  }
}


/* LOAD CSV */
Papa.parse("voters.csv", {
    download: true,
    header: true,
    skipEmptyLines: true,
    complete: function(results) {
        allData = results.data;

        table = $('#votersTable').DataTable({
            data: allData,
            pageLength: 25,
            responsive: true,

            columns: [
                { data: "S.No", type:"num", defaultContent:"" },

                { data: function(row){ return isTelugu ? (row.Ward_Tel || row.Ward) : row.Ward; } },

                { data: function(row){ return isTelugu ? (row.Name_Tel || row.Name) : row.Name; },
                  className:"telugu" },

                { data: function(row){ return isTelugu ? (row.Father_Tel || row["Father/Husband Name"]) : row["Father/Husband Name"]; },
                  className:"telugu" },

                { data: "Age" },

                { data: "Sex",
                  render: function(d){
                      const raw = (d||"").toUpperCase();
                      const isM = raw==="M" || raw==="MALE";
                      return isTelugu ? (isM ? "‡∞™‡±Å‡∞∞‡±Å‡∞∑‡±Å‡∞°‡±Å" : "‡∞∏‡±ç‡∞§‡±ç‡∞∞‡±Ä")
                                      : (isM ? "Male" : "Female");
                  }
                },

                { data: "EPIC" }
            ],

            drawCallback: function(){
                $('#showingCount').text(
                    table.rows({search:'applied'}).count()
                );
            }
        });

        document.getElementById('totalCount').textContent = allData.length;
        document.getElementById('maleCount').textContent =
            allData.filter(r => (r.Sex||"").toUpperCase()==="M").length;
        document.getElementById('femaleCount').textContent =
            allData.filter(r => (r.Sex||"").toUpperCase()==="F").length;

        $('#votersTable').show();
        $('#showingCount').text(
            table.rows({search:'applied'}).count()
        );
    }
});

document.getElementById("langBtn").onclick = toggleLanguage;
</script>

</body>
</html>
